import ThemeProviderWrapper from "@/components/ThemeProvider";
import { Toaster } from "@/components/ui/toaster";
import { Header } from "@/features/dashboard/components/Navbar";
import { Sidebar } from "@/features/dashboard/components/Sidebar";
import { getUser } from "@/lib/Actions/Users";
import type { Metadata } from "next";

export const metadata: Metadata = {
  title: "Create Next App",
  description: "Generated by create next app",
};

export default async function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  const user = await getUser();
  return (
    <ThemeProviderWrapper>
      <div className="min-h-screen grid grid-rows-[auto_1fr] lg:grid-cols-[250px_1fr]">
        {/* Sidebar sticky left */}
        <aside className="row-span-full hidden lg:block sticky top-0 left-0 h-screen z-50">
          <Sidebar />
        </aside>

        {/* Header sticky top */}
        <header className="col-span-1 sticky top-0 z-40 bg-white ml-1">
          <Header img={user.img || ""} />
        </header>

        {/* Main content centered */}
        <main className="">{children}</main>

        <Toaster />
      </div>
    </ThemeProviderWrapper>
  );
}
